/* ========== patch.css v20251031-fixA ========== */

/* 安全域・重なり順のみ */
:root{
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

/* ハンバーガー */
.menu-button{
  position:fixed; top:calc(10px + var(--safe-top)); right:calc(10px + var(--safe-right));
  z-index:10000; width:48px; height:48px; border-radius:12px;
  background:#111827; color:#fff; display:inline-flex; align-items:center; justify-content:center;
  box-shadow:0 4px 14px rgba(0,0,0,.15);
}
.menu-button .bars{width:28px;height:20px;position:relative}
.menu-button .bars::before,.menu-button .bars::after,.menu-button .bars span{
  content:"";position:absolute;left:0;right:0;height:2px;background:#fff;border-radius:2px
}
.menu-button .bars::before{top:0}.menu-button .bars span{top:9px}.menu-button .bars::after{bottom:0}

/* ドロワー */
.menu-wrap{position:fixed;inset:0;z-index:9999;pointer-events:none}
.menu-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.35);opacity:0;transition:opacity .18s}
.menu-panel{
  position:absolute;top:0;right:0;height:100%;width:min(420px,92vw);
  background:#f5f7fa;border-left:1px solid #e5e7eb;box-shadow:-16px 0 40px rgba(0,0,0,.12);
  transform:translateX(100%);transition:transform .22s;display:flex;flex-direction:column
}
.menu-head{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid #e5e7eb;background:#fff;position:sticky;top:0;z-index:2}
.menu-groups{flex:1 1 auto;overflow:auto;-webkit-overflow-scrolling:touch;padding:8px 0 12px}
.menu-close{width:36px;height:36px;border:1px solid #e5e7eb;border-radius:10px;background:#fff}
html.menu-open .menu-wrap{pointer-events:auto}
html.menu-open .menu-backdrop{opacity:1}
html.menu-open .menu-panel{transform:none}
html.menu-open,html.menu-open body{overflow:hidden}

/* 言語（地球儀） */
.lang-button{
  position:fixed; top:calc(10px + var(--safe-top));
  right:calc(10px + var(--safe-right) + 48px + 10px);
  z-index:10001; width:48px;height:48px;border-radius:12px;background:#111827;color:#fff;
  display:inline-flex;align-items:center;justify-content:center; box-shadow:0 4px 14px rgba(0,0,0,.15)
}
.lang-wrap{position:fixed;inset:0;z-index:10002;pointer-events:none}
.lang-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.35);opacity:0;transition:opacity .18s}
.lang-panel{
  position:absolute;top:calc(64px + var(--safe-top)); right:calc(10px + var(--safe-right));
  width:min(420px,92vw); background:#fff; border:1px solid #e5e7eb; border-radius:12px;
  box-shadow:0 16px 40px rgba(0,0,0,.12); transform:translateY(-8px) scale(.98); opacity:0; transition:.18s;
  max-height: calc(100dvh - 80px); display:flex; flex-direction:column; overflow:hidden
}
.lang-head{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:10px 12px;border-bottom:1px solid #e5e7eb;background:#f8fafc}
.lang-body{padding:10px 12px;overflow:auto;-webkit-overflow-scrolling:touch}
.ls-search input{width:100%;height:40px;border-radius:8px;border:1px solid #d1d5db;padding:0 10px}
.ls-list{display:grid;grid-template-columns:1fr;gap:6px}
.ls-item{display:flex;align-items:center;justify-content:space-between;padding:9px 10px;border-radius:8px;border:1px solid #e5e7eb;background:#fff;cursor:pointer}
.ls-item:hover{background:#f3f4f6}
.ls-code{font-size:12px;color:#64748b}
html.lang-open .lang-wrap{pointer-events:auto}
html.lang-open .lang-backdrop{opacity:1}
html.lang-open .lang-panel{transform:none;opacity:1}

/* Google翻訳の邪魔UIは非表示（本体は動作） */
#goog-gt-tt, .goog-te-spinner-pos, .VIpgJd-ZVi9od-ORHb-OEVmcd,
iframe#goog-te-banner-frame, .goog-te-banner-frame { display:none !important; visibility:hidden !important; }

/* ① リスクと為替テーブル：横スクロール器 */
.fx-sim-scroll{
  overflow-x:auto; -webkit-overflow-scrolling:touch;
  border:1px solid #e5e7eb; border-radius:12px; background:#fff; padding-right:12px; padding-bottom:2px;
}
.fx-sim-table{ width:max-content; border-collapse:separate; border-spacing:0; font-variant-numeric:tabular-nums; }
.fx-sim-table thead th{ position:sticky; top:0; z-index:1; background:#f9fafb; border-bottom:1px solid #d1d5db; font-weight:700 }
.fx-sim-table th, .fx-sim-table td{ padding:12px 14px; border-bottom:1px solid #e5e7eb; line-height:1.45; text-align:right }
.fx-sim-table th:first-child, .fx-sim-table td:first-child{ text-align:left; white-space:nowrap }
.fx-sim-table tbody tr:nth-child(even){ background:#fafafa }
.fx-sim-table tbody tr:hover{ background:#f5f7fa }
.fx-sim-table td.fx-neg{ color:#b91c1c; font-weight:600 }
.fx-sim-table td.fx-pos{ color:#0f766e; font-weight:600 }

/* ===== patch.css（v4：翻訳復旧＋見出し統一＋重複見出し抑止）================= */
/* 基本変数 */
:root{
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --cta-h: 72px;
  --menu-head-h: 56px;
}

html,body{margin:0;padding:0}
html, body { overflow:auto !important; height:auto !important; }
body{ padding-bottom: calc(var(--cta-h) + var(--safe-bottom)); }

/* --- アコーディオン（既存） --- */
details summary{
  padding:1rem 1.2rem;cursor:pointer;list-style:none;
  border:1px solid #e5e7eb;border-radius:10px;background:#fff;font-weight:700
}
details[open] summary{background:#f8fafc;border-bottom-left-radius:0;border-bottom-right-radius:0}
details .content{
  border:1px solid #e5e7eb;border-top:0;border-bottom-left-radius:10px;border-bottom-right-radius:10px;
  padding:1rem 1.2rem .9rem;background:#fff
}
.accordion>details{margin:.55rem 0!important}

/* テキスト系ユーティリティ */
.text-sm{font-size:.86em;opacity:.9}
.muted{color:#475569}
.note{display:block;font-size:.82em;color:#475569;margin-top:.35rem}
.smallish{font-size:clamp(20px,3.6vw,24px);margin-bottom:.75rem;font-weight:800}

/* 価格ボックスなど（必要最低限） */
.price-promo{border:1px solid #e5e7eb;background:#f9fafb;border-radius:12px;padding:16px 16px 14px;margin:14px 0;box-shadow:0 2px 10px rgba(0,0,0,.03)}
.price-promo .row{display:flex;flex-wrap:wrap;align-items:baseline;gap:8px}
.price-promo .label{color:#475569;font-weight:700}
.price-promo .old{color:#64748b;text-decoration:line-through}
.price-promo .now{font-weight:800;font-size:clamp(18px,2.2vw,22px);color:#d32f2f}
.price-promo .badge{display:inline-block;background:#ef4444;color:#fff;border-radius:999px;padding:.2rem .6rem;font-size:.8em;font-weight:700;margin-left:.25rem}
.price-promo .meta{font-size:.86em;color:#475569;margin-top:6px;line-height:1.6}

/* テーブル */
table{width:100%;border-collapse:collapse;margin:.5rem 0}
th,td{border:1px solid #e5e7eb;padding:.5rem .6rem;text-align:right}
th:first-child,td:first-child{text-align:left}

/* セクション間隔 指定（要望に合わせて） */
#corp-setup{padding-bottom:0!important}
#plans{padding-top:0!important;margin-top:0!important}

/* ===== 言語切替UI（暗転だけ問題をCSS側で確実に抑止） ===== */
/* 右上の地球儀ボタン（DOMに存在する前提） */
.lang-button{
  position:fixed;top:calc(10px + var(--safe-top));
  right:calc(10px + var(--safe-right));
  z-index:10001; width:48px;height:48px;border-radius:12px;
  background:#111827; color:#fff; border:1px solid rgba(255,255,255,.08);
  display:inline-flex;align-items:center;justify-content:center;
  box-shadow:0 4px 14px rgba(0,0,0,.15); cursor:pointer;
}
.lang-button .globe{font-size:20px;line-height:1}

/* オーバーレイ（JSで生成される .lang-wrap / .lang-backdrop 前提） */
.lang-wrap{position:fixed;inset:0;z-index:10002;pointer-events:none}
.lang-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.35);opacity:0;transition:opacity .18s ease;backdrop-filter:blur(1px)}

html.lang-open .lang-wrap, body.lang-open .lang-wrap { pointer-events: auto; }
html.lang-open .lang-backdrop, body.lang-open .lang-backdrop { opacity: 1; }

/* Google翻訳：青バナー等は常時非表示 */
#goog-gt-tt, iframe#goog-te-banner-frame, .goog-te-banner-frame{
  display:none!important;visibility:hidden!important;height:0!important;max-height:0!important;overflow:hidden!important
}
body > .skiptranslate{display:none!important}

/* 公式ウィジェットは通常は画面外へ退避（開いた時だけ出す） */
#google_translate_element{
  position:fixed;left:-9999px;top:-9999px;width:0;height:0;overflow:hidden;opacity:0;
  pointer-events:auto !important;
}
html.lang-open #google_translate_element,
body.lang-open #google_translate_element{
  position: fixed !important;
  top: calc(64px + var(--safe-top)) !important;
  right: calc(10px + var(--safe-right)) !important;
  left: auto !important; width: auto !important; height: auto !important;
  display: block !important; visibility: visible !important; opacity: 1 !important;
  transform: none !important; pointer-events: auto !important;
  z-index: 2147483646 !important;
}
/* Googleの言語メニューを最前面に */
iframe.goog-te-menu-frame, .goog-te-menu2 { z-index: 2147483647 !important; }
/* 言語選択中だけ skiptranslate を許可（フォーカス可能に） */
html.lang-open body > .skiptranslate, body.lang-open > .skiptranslate { display: block !important; }

/* ===== 見出し：重複抑止＋サイズ統一 ===== */
/* #corp-setup 直下で、直後に .accordion が続く重複見出しだけ隠す */
#corp-setup > :is(h1,h2,h3):has(+ .accordion){
  display: none !important;
}
/* アコーディオン直前の見出しサイズを統一（3ブロック共通） */
:is(h1,h2,h3):has(+ .accordion){
  font-size: clamp(22px, 5.6vw, 28px) !important;
  line-height: 1.28 !important;
  margin: 0 0 .8rem !important;
  font-weight: 800 !important;
}

@media (max-width:480px){
  h2{font-size:clamp(18px,5.6vw,22px);line-height:1.28;margin:0 0 .8rem}
}

/* ===== フッター色固定 ===== */
:root{ --foot-bg:#0b1220; --foot-fg:#cbd5e1; --foot-border:#1f2937; }
.site-foot{
  background:var(--foot-bg) !important; color:var(--foot-fg) !important; border-top:1px solid var(--foot-border) !important;
  text-align:center; padding:14px 16px; padding-bottom:calc(14px + env(safe-area-inset-bottom,0px));
  font-size:13px; line-height:1.7;
}
.site-foot a{ color:#93c5fd; text-decoration:underline; text-underline-offset:2px; }

/* ===== 可読性ポリッシュ（安全） ===== */
h1, .hero h1, .page-title, .hero .lead {
  word-break: keep-all; overflow-wrap: anywhere; line-break: strict; text-wrap: balance;
}
.fx-wrap{ overflow:auto; -webkit-overflow-scrolling: touch; }
.fx-sim thead th{ position: sticky; top: 0; z-index: 1; background: #fff; }
@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important; scroll-behavior: auto !important; }
}
:focus-visible { outline: 2px solid #2563eb; outline-offset: 2px; }

/* ===== フォントは既定へ戻す（強制上書き） ===== */
html, body,
button, input, select, textarea, summary, details,
nav, a { font-family: -apple-system, BlinkMacSystemFont,
         "Hiragino Sans", "Hiragino Kaku Gothic ProN",
         "Yu Gothic", Meiryo, "Noto Sans JP",
         "Segoe UI", Roboto, Helvetica, Arial, sans-serif !important; }

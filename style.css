/* =========================================================
   style.css  — sticky CTA 安定版 + フォント復元
   ========================================================= */

/* ---- 基本変数 ---- */
:root{
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --cta-h: 72px;               /* JSで実測して上書き */
  --cta-buffer: 28px;          /* CTAと本文の被り防止バッファ */
}

/* ---- フォント（以前のスタックを復元） ---- */
html, body{
  margin:0;
  height:100%;
  overflow:hidden;                               /* viewportはスクロールさせない */
  -webkit-text-size-adjust:100%;
  font-family:
    "Noto Sans JP","Hiragino Kaku Gothic ProN","Hiragino Sans",
    "Yu Gothic",Meiryo,system-ui,-apple-system,"Segoe UI",
    Roboto,Helvetica,Arial,sans-serif;
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}

/* ---- 実際にスクロールさせる領域 ---- */
#scrollRoot{
  height:100dvh;                   /* iOSのツールバー変動に強い */
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
  overscroll-behavior:none;        /* ラバーバンド抑止 */
  scroll-behavior:smooth;
  background:#fff;
  padding-bottom:calc(var(--cta-h) + var(--cta-buffer) + var(--safe-bottom));
}

/* 末尾スペーサ（JSで高さ可変） */
#ctaSpacer{ height:calc(var(--cta-h) + var(--cta-buffer)); }

/* ---- レイアウト便利系 ---- */
.container{ max-width:64rem; margin:0 auto; padding:0 1rem; }
.section{ padding:2.5rem 0; }
.text-sm{ font-size:.86em; opacity:.9 }

/* ---- 見出し（任意） ---- */
section > h2{
  font-weight:800; letter-spacing:.01em; line-height:1.25;
  font-size:clamp(22px,2.8vw,30px);
  margin:0 0 .8rem; padding-bottom:.35rem; border-bottom:2px solid #eaeaea;
}

/* ---- アコーディオン ---- */
.accordion details{
  border:1px solid #e7ebf2; border-radius:12px; background:#fff;
  box-shadow:0 8px 24px rgba(16,24,40,.06); overflow:hidden;
}
.accordion details + details{ margin-top:12px; }
.accordion summary{
  list-style:none; cursor:pointer; font-weight:800;
  padding:14px 48px 14px 16px; position:relative; background:#fbfcff;
}
.accordion summary::-webkit-details-marker{ display:none; }
.accordion summary::after{
  content:"+"; position:absolute; right:14px; top:50%; transform:translateY(-50%);
  width:22px; height:22px; border-radius:6px; display:grid; place-items:center;
  background:#eef4ff; color:#3657ff; border:1px solid #dbe7ff; font-weight:900;
}
.accordion details[open] > summary::after{ content:"−"; }
.accordion .content{ padding:12px 16px 16px; border-top:1px solid #eef2f7; }

/* ---- “KYC → 料金プラン” 継ぎ目の調整 ---- */
#corp-setup .accordion{ padding-bottom:0 !important; }
#plans .accordion{ padding-top:0 !important; }
#corp-setup + #plans{ margin-top:12px !important; }

/* ---- 右上ハンバーガー ---- */
.menu-button{
  position:fixed; top:calc(10px + var(--safe-top)); right:calc(10px + var(--safe-right));
  z-index:10000; width:48px; height:48px; border-radius:12px;
  background:#111827; color:#fff; display:inline-flex; align-items:center; justify-content:center;
  box-shadow:0 4px 14px rgba(0,0,0,.15);
}
.menu-button .bars{ width:28px; height:20px; position:relative; display:block; }
.menu-button .bars::before,.menu-button .bars::after,.menu-button .bars span{
  content:""; position:absolute; left:0; right:0; height:2px; background:#fff; border-radius:2px;
}
.menu-button .bars::before{ top:0 } .menu-button .bars span{ top:9px } .menu-button .bars::after{ bottom:0 }

.menu-wrap{ position:fixed; inset:0; z-index:9999; pointer-events:none; }
.menu-backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.35); opacity:0; transition:.18s; }
.menu-panel{
  position:absolute; top:0; right:0; height:100%; width:min(420px,92vw); background:#f5f7fa;
  border-left:1px solid #e5e7eb; transform:translateX(100%); transition:.22s;
  color:#0b1220; font-size:14px; line-height:1.38;
}
.menu-head{ display:flex; align-items:center; justify-content:space-between; gap:8px;
  padding:12px 14px; border-bottom:1px solid #e5e7eb; background:#fff; position:sticky; top:0; z-index:2; }
.menu-title{ font-weight:800; }
.menu-close{ width:36px; height:36px; display:inline-flex; align-items:center; justify-content:center;
  border-radius:10px; border:1px solid #e5e7eb; background:#fff; }
.menu-groups{ overflow:auto; height:calc(100% - 60px); padding:10px 0; }
.menu-group{ padding:8px 10px 6px }
.menu-group h4{ margin:0 0 6px; padding:0 6px; font-size:.92rem; font-weight:700; color:#111827; }
.menu-group.compact{ padding-top:2px; }
.menu-list{ list-style:none; margin:0; padding:0; }
.menu-list li a{
  display:block; padding:7px 10px; margin:0 6px 6px; border-radius:8px;
  text-decoration:none; color:#334155; background:#fff; border:1px solid #e5e7eb;
}
html.menu-open .menu-wrap{ pointer-events:auto }
html.menu-open .menu-backdrop{ opacity:1 }
html.menu-open .menu-panel{ transform:none }
html.menu-open, html.menu-open body{ overflow:hidden }

/* ---- 画面下 固定CTA ---- */
.fixed-cta{
  position:fixed; left:0; right:0; bottom:0; z-index:9998; background:#ffffffcc;
  -webkit-backdrop-filter:saturate(140%) blur(8px);
  backdrop-filter:saturate(140%) blur(8px);
  border-top:1px solid rgba(0,0,0,.06);
  padding-bottom:var(--safe-bottom);
}
.fixed-cta .row{
  max-width:64rem; margin:0 auto; display:flex; gap:.6rem; align-items:center; justify-content:flex-end;
  padding:.6rem 1rem; min-height:var(--cta-h);
}
.btn{ display:inline-flex; gap:.5rem; align-items:center; justify-content:center;
  border-radius:10px; padding:.55rem .9rem; font-weight:700; border:1px solid transparent;
  text-decoration:none; white-space:nowrap; cursor:pointer; }
.btn.neutral{ background:#e5e7eb; color:#111827 }
.btn.secondary{ background:#1f2937; color:#fff }
.btn.success{ background:#10b981; color:#fff }
.btn:hover{ opacity:.92 }

/* ---- 小さめ画面 ---- */
@media (max-width:480px){
  .section{ padding:2rem 0; }
}
